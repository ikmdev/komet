<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<?import dev.ikm.komet.kleditorapp.view.control.EditorWindowControl?>
<?import dev.ikm.komet.kleditorapp.view.propertiespane.PropertiesPane?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.Group?>
<BorderPane fx:id="klEditorMainContainer" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="dev.ikm.komet.kleditorapp.view.KLEditorMainScreenController">
    <center>
        <BorderPane id="root" prefHeight="780.0" prefWidth="1280.0">
            <!-- TOP BAR (purple header) + TOOLBAR (controls under header) -->
            <top>
                <VBox spacing="0">
                    <!-- Purple header -->
                    <HBox alignment="CENTER_LEFT" prefHeight="44" spacing="8" styleClass="app-header">
                        <Label alignment="CENTER" contentDisplay="CENTER" maxWidth="1.7976931348623157E308"
                               styleClass="app-title" text="KNOWLEDGE LAYOUT EDITOR" HBox.hgrow="ALWAYS"/>
                    </HBox>
                </VBox>
            </top>
            <!-- CENTER CANVAS AREA -->
            <center>
                <BorderPane>
                    <center>
                        <ScrollPane fx:id="canvasScrollPane" styleClass="canvas-scroll-pane" hbarPolicy="NEVER">
                            <StackPane fx:id="canvas" styleClass="canvas" VBox.vgrow="ALWAYS">
                                <Group>
                                    <EditorWindowControl fx:id="editorWindowControl"/>
                                </Group>
                            </StackPane>
                        </ScrollPane>
                    </center>
                    <top>
                        <!-- Secondary toolbar under header -->
                        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="top-toolbar"
                              BorderPane.alignment="CENTER">

                            <Label minWidth="-Infinity" text="Window Title:"/>
                            <TextField fx:id="titleTextField" prefWidth="260" promptText="Enter Window Title"
                                       styleClass="title-name-field"/>
                            <Pane HBox.hgrow="ALWAYS"/>
                            <Button defaultButton="true" fx:id="saveButton" onAction="#onSave" text="SAVE WINDOW"/>
                        </HBox>
                    </top>
                    <right>
                        <PropertiesPane fx:id="propertiesPane"/>
                    </right>
                </BorderPane>
            </center>
            <left>
                <VBox styleClass="pattern-browser" BorderPane.alignment="CENTER">
                    <!-- Sidebar header -->
                    <HBox alignment="CENTER_LEFT" spacing="8" styleClass="header">
                        <Label alignment="CENTER" maxWidth="1.7976931348623157E308" styleClass="sidebar-title"
                               text="Pattern and Control Library" wrapText="true" HBox.hgrow="ALWAYS"/>
                    </HBox>
                    <VBox styleClass="content-container" VBox.vgrow="ALWAYS">
                        <children>
                            <!-- Search + options row -->
                            <HBox spacing="8" styleClass="search-container">
                                <TextField promptText="Search patterns and controls" HBox.hgrow="ALWAYS">
                                </TextField>
                                <padding>
                                    <Insets bottom="8" left="12" right="12" top="0"/>
                                </padding>
                            </HBox>
                            <TitledPane text="Patterns" VBox.vgrow="ALWAYS">
                                <ListView fx:id="patternBrowserListView"/>
                                <styleClass>
                                    <String fx:value="dark"/>
                                    <String fx:value="patterns-titled-pane"/>
                                </styleClass>
                            </TitledPane>
                            <TitledPane text="Controls" >
                                <ListView fx:id="controlsListView" />
                                <styleClass>
                                    <String fx:value="dark"/>
                                    <String fx:value="controls-titled-pane"/>
                                </styleClass>
                            </TitledPane>
                        </children>
                    </VBox>
                </VBox>
            </left>
        </BorderPane>
    </center>
    <left>
        <VBox styleClass="side-bar" BorderPane.alignment="CENTER">
            <children>
                <Button mnemonicParsing="false">
                    <graphic>
                        <StackPane>
                            <styleClass>
                                <String fx:value="icon"/>
                                <String fx:value="home"/>
                            </styleClass>
                        </StackPane>
                    </graphic>
                    <VBox.margin>
                        <Insets bottom="14.0"/>
                    </VBox.margin>
                </Button>
                <Separator/>
                <ToggleButton mnemonicParsing="false" selected="true">
                    <toggleGroup>
                        <ToggleGroup fx:id="sideBarToggleButtons"/>
                    </toggleGroup>
                    <graphic>
                        <StackPane>
                            <styleClass>
                                <String fx:value="icon"/>
                                <String fx:value="list"/>
                            </styleClass>
                        </StackPane>
                    </graphic>
                </ToggleButton>
                <ToggleButton mnemonicParsing="false" toggleGroup="$sideBarToggleButtons">
                    <graphic>
                        <StackPane>
                            <styleClass>
                                <String fx:value="icon"/>
                                <String fx:value="code"/>
                            </styleClass>
                        </StackPane>
                    </graphic>
                </ToggleButton>
                <Separator/>
                <ToggleButton mnemonicParsing="false" toggleGroup="$sideBarToggleButtons">
                    <graphic>
                        <StackPane>
                            <styleClass>
                                <String fx:value="icon"/>
                                <String fx:value="layout"/>
                            </styleClass>
                        </StackPane>
                    </graphic>
                </ToggleButton>
            </children>
        </VBox>
    </left>
</BorderPane>
